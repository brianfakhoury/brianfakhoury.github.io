<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/9bf67a161a796382-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/f19123270e2664f2-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/e8f5fdbf30653f55.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-69ddc74cf9aa72ff.js"/><script src="/_next/static/chunks/fd9d1056-703fc81082488f24.js" async=""></script><script src="/_next/static/chunks/52117-9452f61707520acd.js" async=""></script><script src="/_next/static/chunks/main-app-bc95d5016dc093be.js" async=""></script><script src="/_next/static/chunks/72972-bd63b10f629476a8.js" async=""></script><script src="/_next/static/chunks/65878-3fc91829e3d54e77.js" async=""></script><script src="/_next/static/chunks/68794-c38c128b671f40db.js" async=""></script><script src="/_next/static/chunks/app/layout-39f6f367f528907e.js" async=""></script><script src="/_next/static/chunks/app/%5Bslug%5D/page-7d723e92f95c30d4.js" async=""></script><script src="/_next/static/chunks/app/error-17ed6ee10a49617e.js" async=""></script><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"/><meta name="color-scheme" content="light dark"/><title>Hybrid Compute Smart Contract Platforms | Brian Fakhoury</title><meta name="description" content="An exploration of smart contracts using external data sources."/><meta name="author" content="Brian Fakhoury"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow"/><meta name="fc:frame" content="vNext"/><meta name="fc:frame:image" content="https://fakhoury.xyz/opengraph-image.jpg"/><meta name="fc:frame:button:1" content="Visit"/><meta name="fc:frame:button:1:action" content="link"/><meta name="fc:frame:button:1:target" content="https://fakhoury.xyz"/><meta name="fc:frame:button:2" content="My Latest Post"/><meta name="fc:frame:button:2:action" content="link"/><meta name="fc:frame:button:2:target" content="https://fakhoury.xyz/our-van"/><link rel="canonical" href="https://mirror.xyz/fakhoury.eth/v0pryMFMTyRiuYMKtwUEPEPSomdcE6XN1XEhuEba1xw"/><link rel="alternate" type="application/atom+xml" href="http://localhost:3000/atom.xml"/><link rel="alternate" type="application/rss+xml" href="http://localhost:3000/feed.xml"/><link rel="alternate" type="application/json" href="http://localhost:3000/feed.json"/><meta property="og:title" content="Hybrid Compute Smart Contract Platforms | Brian Fakhoury"/><meta property="og:description" content="An exploration of smart contracts using external data sources."/><meta property="og:url" content="http://localhost:3000/hybrid-compute"/><meta property="og:site_name" content="Brian Fakhoury"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="http://localhost:3000/hybrid-compute/og.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Brian Fakhoury&#x27;s headshot alongside the title of the post: &quot;Hybrid Compute Smart Contract Platforms&quot;"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-01-24T00:00:00.000Z"/><meta property="article:author" content="Brian Fakhoury"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@brianfakhoury"/><meta name="twitter:title" content="Hybrid Compute Smart Contract Platforms | Brian Fakhoury"/><meta name="twitter:description" content="An exploration of smart contracts using external data sources."/><meta name="twitter:image" content="http://localhost:3000/hybrid-compute/og.png"/><meta name="twitter:image:width" content="1200"/><meta name="twitter:image:height" content="630"/><meta name="twitter:image:alt" content="Brian Fakhoury&#x27;s headshot alongside the title of the post: &quot;Hybrid Compute Smart Contract Platforms&quot;"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><link rel="icon" href="/icon.png?444542afcbef745e" type="image/png" sizes="512x512"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_88131f __variable_3081c8"><div data-overlay-container="true"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="mx-auto px-4 sm:px-8 max-w-screen-xl font-raleway"><header class="flex items-center justify-between py-10 pr-6"><div class="flex items-center"><a href="/"><img alt="Headshot of Brian Fakhoury" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ficon.444542af.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ficon.444542af.png&amp;w=96&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Ficon.444542af.png&amp;w=96&amp;q=75"/></a><div class="ml-2 flex flex-col"><a href="/">Brian Fakhoury</a><a class="py-0.5 text-sm" target="_blank" rel="noopener noreferrer" href="https://x.com/brianfakhoury">@brianfakhoury</a></div></div></header><main class="min-h-[85vh] p-0"><article class="prose prose-stone dark:prose-invert text-pretty break-words mx-auto"><header><time dateTime="2022-01-24T00:00:00.000Z" class="block mb-5 text-sm">Jan 23, 2022</time><h1 class="first-letter:font-greatVibes">Hybrid Compute Smart Contract Platforms</h1><aside class="text-xs">Originally published at<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://mirror.xyz/fakhoury.eth/v0pryMFMTyRiuYMKtwUEPEPSomdcE6XN1XEhuEba1xw">mirror.xyz</a></aside></header><section class="relative null"><div class="first-letter:text-5xl first-letter:font-bold first-letter:mr-2 first-letter:float-left pt-3"><p>I originally posted this analysis on Twitter here: https://x.com/brianfakhoury/status/1485150532897591301</p>
<hr/>
<p>I came across something interesting that the team behind Boba network is working on: https://github.com/omgnetwork/optimism-v2</p>
<p>TLDR: blockchains are <em>supposed</em> to be perfectly discrete state machines with no outside effects. But, if you&#x27;re a rollup, perhaps fraud proofs can add some slack.</p>
<p>The idea here is &quot;hybrid compute&quot; smart contracts -- everything functions normally, but contract code can also query an external API.</p>
<p>On an L1 chain, this would be ludicrous as APIs are the antithesis to a predictable/unchanging state. The number of attack vectors would be huge.</p>
<p>You need to be able to replay the chain and not have to worry about an API endpoint being down or returning different data.</p>
<p>Throwing this assumption aside for a moment, this power would be incredibly useful for things like random number generation, price oracles, compute, etc..</p>
<p>Of course, it falls heavily on developers to use secure endpoints and correctly represent the risk on the front end.</p>
<p>I&#x27;m not saying it&#x27;s a good idea, I just think it&#x27;s sick tech. Here&#x27;s a quick overview of how it works in their &quot;Turing&quot; implementation:</p>
<p>Imagine being able to write code like this inside a contract.</p>
<p>(technically only 1 turning call can happen per transaction, assuming this is bc of a recursion attack)</p>
<figure><img alt="blog image" loading="lazy" width="1200" height="491" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent" srcSet="/_next/image?url=%2Fimages%2Fhybrid-compute%2F6fe4889a99550141780451e928cb85b4_MD5.png&amp;w=1200&amp;q=75 1x, /_next/image?url=%2Fimages%2Fhybrid-compute%2F6fe4889a99550141780451e928cb85b4_MD5.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=%2Fimages%2Fhybrid-compute%2F6fe4889a99550141780451e928cb85b4_MD5.png&amp;w=3840&amp;q=75"/></figure>
<p>To enable this type of EVM execution, the Geth client (L2TGeth) is first modified at the execution layer.</p>
<p>L2TGeth, in simple terms, intercepts function calls that have an external effect, replaces the inputs, and continues executing EVM like nothing happened.</p>
<p>The hard part comes at the consensus -- it&#x27;s difficult for other verifiers to re-execute transactions with an RNG, for example.</p>
<p>To overcome this part, Turing transactions are saved into block metadata which is understood to be parsed &quot;as is&quot; by other L2TGeth clients.</p>
<p>The representation of Turing transactions occurs in the canonical transaction chain (CTC), meaning there are no special exceptions happening at the consensus layer, and consequentially in the L1 contracts...</p>
<p>Assuming all the complicated plumbing works, how is fraud prevented?</p>
<p>As a quick refresher, blocks on rollups are put together by &quot;sequencers,&quot; a special node on the network that is responsible for ordering transactions. Sequencers do not have to be fully decentralized, and it&#x27;s up to the rollup governance to decide who has the ability to run one</p>
<p>So while anyone can verify the validity of an optimistic rollup like Boba, only a privileged sequencer can actually produce a block.</p>
<p>In the case of a system like Turing, this is especially important because sequencers can have a reputation.</p>
<p>Right now, there&#x27;s only 1 sequencer on the Boba network, while there are many nodes that relay transactions and verify the state. So, if you see where I&#x27;m going here, the sequencer, being metaphorically watched by the whole world, can&#x27;t risk losing trust.</p>
<p>On one hand, user funds are always available by mainnet security, and on the other hand, funds that are ephemerally at risk by a Turing call, likely a fraction of the economic value of the rollup, are kept in check by social consensus.</p>
<p>Should the sequencer try to game a Turing transaction, it&#x27;s likely social consensus will halt the flow of future Turing transactions immediately and punish the sequencer later perhaps by removing it entirely!</p>
<p>These types of economic systems are exciting <em>because</em> they are imperfect, yet they have the potential to further open up the design space on public blockchains.</p>
<p>You don&#x27;t have to look much farther than current bridges/xchain messaging to see these same dynamics...</p>
<p>So while the fraud proving system doesn&#x27;t directly disincentivize bad behavior, the nature of permissioned sequencers and public state make this something possible in practice.</p>
<p>Unfortunately, I couldn&#x27;t get the tests to work on my machine, which is a hint at the lift that this probably takes for it to be considered robust.</p>
<p>Regardless, hope someone learned something from this, and I hope to see others experimenting as well</p>
<figure><img alt="blog image" loading="lazy" width="985" height="1200" decoding="async" data-nimg="1" class="rounded-lg" style="color:transparent" srcSet="/_next/image?url=%2Fimages%2Fhybrid-compute%2F5892946c39a93481aa4f50877d6e2b1f_MD5.png&amp;w=1080&amp;q=75 1x, /_next/image?url=%2Fimages%2Fhybrid-compute%2F5892946c39a93481aa4f50877d6e2b1f_MD5.png&amp;w=2048&amp;q=75 2x" src="/_next/image?url=%2Fimages%2Fhybrid-compute%2F5892946c39a93481aa4f50877d6e2b1f_MD5.png&amp;w=2048&amp;q=75"/></figure></div></section><footer class="not-prose flex flex-col space-y-4 mt-12"><hr class="border-t border-stone-300"/><div class="flex flex-wrap gap-3"><a href="/writing/crypto">#<!-- -->crypto</a><a href="/writing/programming">#<!-- -->programming</a><a href="/writing/tech">#<!-- -->tech</a></div><a href="/writing">← All writing</a></footer></article></main><footer class="text-sm flex items-center py-10 pr-2"><a aria-label="Send me a direct message on X" target="_blank" rel="noopener noreferrer" href="https://x.com/messages/compose?recipient_id=987899418597879808"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mailbox"><path d="M22 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.5C2 7 4 5 6.5 5H18c2.2 0 4 1.8 4 4v8Z"></path><polyline points="15,9 18,9 18,11"></polyline><path d="M6.5 5C9 5 11 7 11 9.5V17a2 2 0 0 1-2 2"></path><line x1="6" x2="7" y1="10" y2="10"></line></svg></a><a class="ml-auto text-xs" target="_blank" rel="noopener noreferrer" href="https://github.com/brianfakhoury/personal-website"><p><span class="inline-block w-2 h-2 mr-1 bg-stone-500 dark:bg-stone-300 rounded-full"></span></p></a></footer></div></div><script src="/_next/static/chunks/webpack-69ddc74cf9aa72ff.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/9bf67a161a796382-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/f19123270e2664f2-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/e8f5fdbf30653f55.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[12846,[],\"\"]\n7:I[4707,[],\"\"]\n9:I[36423,[],\"\"]\na:I[76168,[\"72972\",\"static/chunks/72972-bd63b10f629476a8.js\",\"65878\",\"static/chunks/65878-3fc91829e3d54e77.js\",\"68794\",\"static/chunks/68794-c38c128b671f40db.js\",\"63185\",\"static/chunks/app/layout-39f6f367f528907e.js\"],\"Providers\"]\nb:I[72972,[\"72972\",\"static/chunks/72972-bd63b10f629476a8.js\",\"65878\",\"static/chunks/65878-3fc91829e3d54e77.js\",\"46042\",\"static/chunks/app/%5Bslug%5D/page-7d723e92f95c30d4.js\"],\"\"]\nc:I[65878,[\"72972\",\"static/chunks/72972-bd63b10f629476a8.js\",\"65878\",\"static/chunks/65878-3fc91829e3d54e77.js\",\"46042\",\"static/chunks/app/%5Bslug%5D/page-7d723e92f95c30d4.js\"],\"Image\"]\nd:I[20087,[\"72972\",\"static/chunks/72972-bd63b10f629476a8.js\",\"65878\",\"static/chunks/65878-3fc91829e3d54e77.js\",\"68794\",\"static/chunks/68794-c38c128b671f40db.js\",\"63185\",\"static/chunks/app/layout-39f6f367f528907e.js\"],\"default\"]\ne:I[13490,[\"97601\",\"static/chunks/app/error-17ed6ee10a49617e.js\"],\"default\"]\nf:I[59363,[\"72972\",\"static/chunks/72972-bd63b10f629476a8.js\",\"65878\",\"static/chunks/65878-3fc91829e3d54e77.js\",\"68794\",\"static/chunks/68794-c38c128b671f40db.js\",\"63185\",\"static/chunks/app/layout-39f6f367f528907e.js\"],\"default\"]\n11:I[61060,[],\"\"]\n8:[\"slug\",\"hybrid-compute\",\"d\"]\n12:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"yray-7w1aokbjRtlaYbY9\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"hybrid-compute\"],\"initialTree\":[\"\",{\"children\":[[\"slug\",\"hybrid-compute\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"hybrid-compute\\\"}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"hybrid-compute\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\",null],null],null]},[[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e8f5fdbf30653f55.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_88131f __variable_3081c8\",\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto px-4 sm:px-8 max-w-screen-xl font-raleway\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10 pr-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":[\"$\",\"$Lc\",null,{\"src\":{\"src\":\"/_next/static/media/icon.444542af.png\",\"height\":512,\"width\":512,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAV1BMVEU+S3bW2N0iLU04QmXy8vL4+fisqqvv7+/e3t7n5uW5uLfEwb/HpZx0ZmrQ0NCohXGMcWTvw651fo2Qj5ZjaXjhuKISHTyMeH0ZGSW6v9BXZI4uOVrFydY2SfC1AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAQUlEQVR4nAXBBQKAMAwEsFtXneAO/38nCTysKJvBw6exiiFFtDmYMbi0PQmj+tJP3IKilIHHoNuRkZGw9otewvcDUDUCWBh2OboAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":8},\"width\":40,\"height\":40,\"alt\":\"Headshot of Brian Fakhoury\",\"className\":\"rounded-full\"}]}],[\"$\",\"div\",null,{\"className\":\"ml-2 flex flex-col\",\"children\":[[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Brian Fakhoury\"}],[\"$\",\"$Lb\",null,{\"href\":\"https://x.com/brianfakhoury\",\"className\":\"py-0.5 text-sm\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"@brianfakhoury\"}]]}]]}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"main\",null,{\"className\":\"min-h-[85vh] p-0\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$e\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"prose dark:prose-invert\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Couldn't find it.\"}],[\"$\",\"p\",null,{\"children\":\"My website doesn't know what you're looking for.\"}],[\"$\",\"p\",null,{\"children\":\"Here are some links, maybe you can find it elsewhere:\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Homepage\"}]}],[\"$\",\"li\",null,{\"children\":[\" \",[\"$\",\"$Lb\",null,{\"href\":\"/writing\",\"children\":\"All writing\"}]]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/robots.txt\",\"children\":\"Instructions for robots\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/sitemap.xml\",\"children\":\"Sitemap (also for robots)\"}]}]]}]]}],\"notFoundStyles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"text-sm flex items-center py-10 pr-2\",\"children\":[[\"$\",\"$Lb\",null,{\"aria-label\":\"Send me a direct message on X\",\"href\":\"https://x.com/messages/compose?recipient_id=987899418597879808\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-mailbox\",\"children\":[[\"$\",\"path\",\"1lbycx\",{\"d\":\"M22 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.5C2 7 4 5 6.5 5H18c2.2 0 4 1.8 4 4v8Z\"}],[\"$\",\"polyline\",\"1pm9c0\",{\"points\":\"15,9 18,9 18,11\"}],[\"$\",\"path\",\"15i455\",{\"d\":\"M6.5 5C9 5 11 7 11 9.5V17a2 2 0 0 1-2 2\"}],[\"$\",\"line\",\"1e2scm\",{\"x1\":\"6\",\"x2\":\"7\",\"y1\":\"10\",\"y2\":\"10\"}],\"$undefined\"]}]}],[\"$\",\"$Lf\",null,{\"build_date\":\"$D2024-11-16T18:31:12.086Z\"}]]}]]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L10\"],\"globalErrorComponent\":\"$11\",\"missingSlots\":\"$W12\"}]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"prose prose-stone dark:prose-invert text-pretty break-words mx-auto\",\"children\":[[\"$\",\"header\",null,{\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2022-01-24T00:00:00.000Z\",\"className\":\"block mb-5 text-sm\",\"children\":\"Jan 23, 2022\"}],\"$undefined\",[\"$\",\"h1\",null,{\"className\":\"first-letter:font-greatVibes\",\"children\":\"Hybrid Compute Smart Contract Platforms\"}],[\"$\",\"aside\",null,{\"className\":\"text-xs\",\"children\":[\"Originally published at\",\" \",[\"$\",\"$Lb\",null,{\"href\":\"https://mirror.xyz/fakhoury.eth/v0pryMFMTyRiuYMKtwUEPEPSomdcE6XN1XEhuEba1xw\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"mirror.xyz\"}]]}],null]}],[\"$\",\"section\",null,{\"className\":\"relative null\",\"children\":[null,[\"$\",\"div\",null,{\"className\":\"first-letter:text-5xl first-letter:font-bold first-letter:mr-2 first-letter:float-left pt-3\",\"children\":[[\"$\",\"p\",\"p-0\",{\"children\":\"I originally posted this analysis on Twitter here: https://x.com/brianfakhoury/status/1485150532897591301\"}],\"\\n\",[\"$\",\"hr\",\"hr-0\",{}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"I came across something interesting that the team behind Boba network is working on: https://github.com/omgnetwork/optimism-v2\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"TLDR: blockchains are \",[\"$\",\"em\",\"em-0\",{\"children\":\"supposed\"}],\" to be perfectly discrete state machines with no outside effects. But, if you're a rollup, perhaps fraud proofs can add some slack.\"]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"The idea here is \\\"hybrid compute\\\" smart contracts -- everything functions normally, but contract code can also query an external API.\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"On an L1 chain, this would be ludicrous as APIs are the antithesis to a predictable/unchanging state. The number of attack vectors would be huge.\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"You need to be able to replay the chain and not have to worry about an API endpoint being down or returning different data.\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"Throwing this assumption aside for a moment, this power would be incredibly useful for things like random number generation, price oracles, compute, etc..\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"Of course, it falls heavily on developers to use secure endpoints and correctly represent the risk on the front end.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"I'm not saying it's a good idea, I just think it's sick tech. Here's a quick overview of how it works in their \\\"Turing\\\" implementation:\"}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"Imagine being able to write code like this inside a contract.\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":\"(technically only 1 turning call can happen per transaction, assuming this is bc of a recursion attack)\"}],\"\\n\",[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$Lc\",null,{\"src\":\"/images/hybrid-compute/6fe4889a99550141780451e928cb85b4_MD5.png\",\"alt\":\"blog image\",\"height\":491,\"width\":1200,\"className\":\"rounded-lg\"}],\"\"]}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":\"To enable this type of EVM execution, the Geth client (L2TGeth) is first modified at the execution layer.\"}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":\"L2TGeth, in simple terms, intercepts function calls that have an external effect, replaces the inputs, and continues executing EVM like nothing happened.\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"The hard part comes at the consensus -- it's difficult for other verifiers to re-execute transactions with an RNG, for example.\"}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":\"To overcome this part, Turing transactions are saved into block metadata which is understood to be parsed \\\"as is\\\" by other L2TGeth clients.\"}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":\"The representation of Turing transactions occurs in the canonical transaction chain (CTC), meaning there are no special exceptions happening at the consensus layer, and consequentially in the L1 contracts...\"}],\"\\n\",[\"$\",\"p\",\"p-16\",{\"children\":\"Assuming all the complicated plumbing works, how is fraud prevented?\"}],\"\\n\",[\"$\",\"p\",\"p-17\",{\"children\":\"As a quick refresher, blocks on rollups are put together by \\\"sequencers,\\\" a special node on the network that is responsible for ordering transactions. Sequencers do not have to be fully decentralized, and it's up to the rollup governance to decide who has the ability to run one\"}],\"\\n\",[\"$\",\"p\",\"p-18\",{\"children\":\"So while anyone can verify the validity of an optimistic rollup like Boba, only a privileged sequencer can actually produce a block.\"}],\"\\n\",[\"$\",\"p\",\"p-19\",{\"children\":\"In the case of a system like Turing, this is especially important because sequencers can have a reputation.\"}],\"\\n\",[\"$\",\"p\",\"p-20\",{\"children\":\"Right now, there's only 1 sequencer on the Boba network, while there are many nodes that relay transactions and verify the state. So, if you see where I'm going here, the sequencer, being metaphorically watched by the whole world, can't risk losing trust.\"}],\"\\n\",[\"$\",\"p\",\"p-21\",{\"children\":\"On one hand, user funds are always available by mainnet security, and on the other hand, funds that are ephemerally at risk by a Turing call, likely a fraction of the economic value of the rollup, are kept in check by social consensus.\"}],\"\\n\",[\"$\",\"p\",\"p-22\",{\"children\":\"Should the sequencer try to game a Turing transaction, it's likely social consensus will halt the flow of future Turing transactions immediately and punish the sequencer later perhaps by removing it entirely!\"}],\"\\n\",[\"$\",\"p\",\"p-23\",{\"children\":[\"These types of economic systems are exciting \",[\"$\",\"em\",\"em-0\",{\"children\":\"because\"}],\" they are imperfect, yet they have the potential to further open up the design space on public blockchains.\"]}],\"\\n\",[\"$\",\"p\",\"p-24\",{\"children\":\"You don't have to look much farther than current bridges/xchain messaging to see these same dynamics...\"}],\"\\n\",[\"$\",\"p\",\"p-25\",{\"children\":\"So while the fraud proving system doesn't directly disincentivize bad behavior, the nature of permissioned sequencers and public state make this something possible in practice.\"}],\"\\n\",[\"$\",\"p\",\"p-26\",{\"children\":\"Unfortunately, I couldn't get the tests to work on my machine, which is a hint at the lift that this probably takes for it to be considered robust.\"}],\"\\n\",[\"$\",\"p\",\"p-27\",{\"children\":\"Regardless, hope someone learned something from this, and I hope to see others experimenting as well\"}],\"\\n\",[\"$\",\"figure\",null,{\"children\":[[\"$\",\"$Lc\",null,{\"src\":\"/images/hybrid-compute/5892946c39a93481aa4f50877d6e2b1f_MD5.png\",\"alt\":\"blog image\",\"height\":1200,\"width\":985,\"className\":\"rounded-lg\"}],\"\"]}]]}]]}],[\"$\",\"footer\",null,{\"className\":\"not-prose flex flex-col space-y-4 mt-12\",\"children\":[[\"$\",\"hr\",null,{\"className\":\"border-t border-stone-300\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-3\",\"children\":[[\"$\",\"$Lb\",\"0\",{\"href\":\"/writing/crypto\",\"children\":[\"#\",\"crypto\"]}],[\"$\",\"$Lb\",\"1\",{\"href\":\"/writing/programming\",\"children\":[\"#\",\"programming\"]}],[\"$\",\"$Lb\",\"2\",{\"href\":\"/writing/tech\",\"children\":[\"#\",\"tech\"]}]]}],[\"$\",\"$Lb\",null,{\"href\":\"/writing\",\"children\":\"← All writing\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"white\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"black\"}],[\"$\",\"meta\",\"3\",{\"name\":\"color-scheme\",\"content\":\"light dark\"}],[\"$\",\"meta\",\"4\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"5\",{\"children\":\"Hybrid Compute Smart Contract Platforms | Brian Fakhoury\"}],[\"$\",\"meta\",\"6\",{\"name\":\"description\",\"content\":\"An exploration of smart contracts using external data sources.\"}],[\"$\",\"meta\",\"7\",{\"name\":\"author\",\"content\":\"Brian Fakhoury\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"9\",{\"name\":\"googlebot\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"10\",{\"name\":\"fc:frame\",\"content\":\"vNext\"}],[\"$\",\"meta\",\"11\",{\"name\":\"fc:frame:image\",\"content\":\"https://fakhoury.xyz/opengraph-image.jpg\"}],[\"$\",\"meta\",\"12\",{\"name\":\"fc:frame:button:1\",\"content\":\"Visit\"}],[\"$\",\"meta\",\"13\",{\"name\":\"fc:frame:button:1:action\",\"content\":\"link\"}],[\"$\",\"meta\",\"14\",{\"name\":\"fc:frame:button:1:target\",\"content\":\"https://fakhoury.xyz\"}],[\"$\",\"meta\",\"15\",{\"name\":\"fc:frame:button:2\",\"content\":\"My Latest Post\"}],[\"$\",\"meta\",\"16\",{\"name\":\"fc:frame:button:2:action\",\"content\":\"link\"}],[\"$\",\"meta\",\"17\",{\"name\":\"fc:frame:button:2:target\",\"content\":\"https://fakhoury.xyz/our-van\"}],[\"$\",\"link\",\"18\",{\"rel\":\"canonical\",\"href\":\"https://mirror.xyz/fakhoury.eth/v0pryMFMTyRiuYMKtwUEPEPSomdcE6XN1XEhuEba1xw\"}],[\"$\",\"link\",\"19\",{\"rel\":\"alternate\",\"type\":\"application/atom+xml\",\"href\":\"http://localhost:3000/atom.xml\"}],[\"$\",\"link\",\"20\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"http://localhost:3000/feed.xml\"}],[\"$\",\"link\",\"21\",{\"rel\":\"alternate\",\"type\":\"application/json\",\"href\":\"http://localhost:3000/feed.json\"}],[\"$\",\"meta\",\"22\",{\"property\":\"og:title\",\"content\":\"Hybrid Compute Smart Contract Platforms | Brian Fakhoury\"}],[\"$\",\"meta\",\"23\",{\"property\":\"og:description\",\"content\":\"An exploration of smart contracts using external data sources.\"}],[\"$\",\"meta\",\"24\",{\"property\":\"og:url\",\"content\":\"http://localhost:3000/hybrid-compute\"}],[\"$\",\"meta\",\"25\",{\"property\":\"og:site_name\",\"content\":\"Brian Fakhoury\"}],[\"$\",\"meta\",\"26\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"27\",{\"property\":\"og:image\",\"content\":\"http://localhost:3000/hybrid-compute/og.png\"}],[\"$\",\"meta\",\"28\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"29\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"30\",{\"property\":\"og:image:alt\",\"content\":\"Brian Fakhoury's headshot alongside the title of the post: \\\"Hybrid Compute Smart Contract Platforms\\\"\"}],[\"$\",\"meta\",\"31\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"32\",{\"property\":\"article:published_time\",\"content\":\"2022-01-24T00:00:00.000Z\"}],[\"$\",\"meta\",\"33\",{\"property\":\"article:author\",\"content\":\"Brian Fakhoury\"}],[\"$\",\"meta\",\"34\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"35\",{\"name\":\"twitter:creator\",\"content\":\"@brianfakhoury\"}],[\"$\",\"meta\",\"36\",{\"name\":\"twitter:title\",\"content\":\"Hybrid Compute Smart Contract Platforms | Brian Fakhoury\"}],[\"$\",\"meta\",\"37\",{\"name\":\"twitter:description\",\"content\":\"An exploration of smart contracts using external data sources.\"}],[\"$\",\"meta\",\"38\",{\"name\":\"twitter:image\",\"content\":\"http://localhost:3000/hybrid-compute/og.png\"}],[\"$\",\"meta\",\"39\",{\"name\":\"twitter:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"40\",{\"name\":\"twitter:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"41\",{\"name\":\"twitter:image:alt\",\"content\":\"Brian Fakhoury's headshot alongside the title of the post: \\\"Hybrid Compute Smart Contract Platforms\\\"\"}],[\"$\",\"link\",\"42\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"43\",{\"rel\":\"icon\",\"href\":\"/icon.png?444542afcbef745e\",\"type\":\"image/png\",\"sizes\":\"512x512\"}],[\"$\",\"meta\",\"44\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script></body></html>